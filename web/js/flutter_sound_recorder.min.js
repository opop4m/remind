/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/tau_core@8.3.12/js/flutter_sound/flutter_sound_recorder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const RECORDER_VERSION="8.2.0",IS_RECORDER_PAUSED=1,IS_RECORDER_RECORDING=2,IS_RECORDER_STOPPED=0;function newRecorderInstance(e,a){return new FlutterSoundRecorder(e,a)}const CB_updateRecorderProgress=0,CB_recordingData=1,CB_startRecorderCompleted=2,CB_pauseRecorderCompleted=3,CB_resumeRecorderCompleted=4,CB_stopRecorderCompleted=5,CB_openRecorderCompleted=6,CB_closeRecorderCompleted=7,CB_recorder_log=8;class FlutterSoundRecorder{static newInstance(e,a){return new FlutterSoundRecorder(e,a)}constructor(e,a){this.callback=e,this.callbackTable=a,this.subscriptionDuration=0,this.timerId=null,this.deltaTime=0,this.currentRecordPath="",this.localObjects=[],this.instanceNo=instanceNumber,this.callbackTable[8](this.callback,DBG,"Instance Number : "+this.instanceNo.toString()),++instanceNumber}initializeFlautoRecorder(e,a,l,c,t){this.callbackTable[8](this.callback,DBG,"initializeFlautoRecorder"),this.callbackTable[6](this.callback,0,!0)}deleteObjects(){for(var e in this.callbackTable[8](this.callback,DBG,"JS:---\x3e deleteObjects "),this.localObjects)this.callbackTable[8](this.callback,DBG,"deleteRecord : "+e),this.deleteRecord(e);this.callbackTable[8](this.callback,DBG,"JS:<--- deleteObjects ")}releaseFlautoRecorder(){this.callbackTable[8](this.callback,DBG,"JS:---\x3e releaseFlautoRecorder"),this.stop(),this.deleteObjects(),this.localObjects=[],this.callbackTable[7](this.callback,0,!0),this.callbackTable[8](this.callback,DBG,"JS:<--- releaseFlautoRecorder")}setAudioFocus(e,a,l,c,t){this.callbackTable[8](this.callback,DBG,"setAudioFocus")}isEncoderSupported(e){var a=MediaRecorder.isTypeSupported(mime_types[e]);return a?this.callbackTable[8](this.callback,DBG,"mime_types[codec] encoder is supported"):this.callbackTable[8](this.callback,DBG,"mime_types[codec] encoder is NOT supported"),a}setSubscriptionDuration(e){this.callbackTable[8](this.callback,DBG,"setSubscriptionDuration"),this.subscriptionDuration=e,null!=this.mediaRecorder&&this.startTimer()}_deleteRecord(e){if(this.callbackTable[8](this.callback,DBG,"deleteRecord: "+e),null==e||""==e)a=lasturl;else var a=e;var l;"/"==a.substring(0,1)?(l=window.localStorage,this.callbackTable[8](this.callback,DBG,"localStorage")):(l=window.sessionStorage,this.callbackTable[8](this.callback,DBG,"sessionStorage"));var c=l.getItem(a);return null!=c&&""!=c&&(this.callbackTable[8](this.callback,DBG,"Deleting object  : "+c.toString()),URL.revokeObjectURL(c),!0)}deleteRecord(e){this._deleteRecord(e);var a=this.localObjects.findIndex((a=>a==e));null!=a&&a>=0&&(this.callbackTable[8](this.callback,DBG,"Found : "+a),this.localObjects[a]=null)}setRecordURL(e,a){this.callbackTable[8](this.callback,DBG,"setRecordUrl: "+e+" <- "+a);var l,c=e;if(null==c||""==c)return null;"/"==c.substring(0,1)?(l=window.localStorage,this.callbackTable[8](this.callback,DBG,"localStorage")):(l=window.sessionStorage,this.callbackTable[8](this.callback,DBG,"sessionStorage"));var t=l.getItem(c);null!=t&&""!=t&&(this.callbackTable[8](this.callback,DBG,"Deleting object  : "+t.toString()),URL.revokeObjectURL(t)),lastUrl=e,l.setItem(c,a),this.callbackTable[8](this.callback,DBG,"<--- setRecordURL ( "+c+" ) : "+a)}getRecordURL(e){this.callbackTable[8](this.callback,DBG,"---\x3e getRecordURL : "+e);var a=getRecordURL(e);return null==a&&(a=""),this.callbackTable[8](this.callback,DBG,"<--- getRecordURL :"+a),a}async startRecorder(e,a,l,c,t,r,s){this.callbackTable[8](this.callback,DBG,"startRecorder");var i=this;this.currentRecordPath=e;var o,b=[];o=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),i.mediaStream=o;var d={audioBitsPerSecond:c,mimeType:mime_types[t]},n=new MediaRecorder(o,d);i.mediaRecorder=n,r?n.start(30):n.start(),i.callbackTable[8](i.callback,DBG,"recorder started : "+n.state),n.ondataavailable=function(a){a.data&&(r&&i.callbackTable[1](i.callback,a.data),null!=e&&""!=e&&(i.callbackTable[8](i.callback,DBG,"On data available : "+a.data.constructor.name),b.push(a.data)))},n.onstart=function(e){i.callbackTable[8](i.callback,DBG,"---\x3e mediaRecorder OnStart"),i.deltaTime=0,i.startTimer(),i.callbackTable[8](i.callback,DBG,"<---mediaRecorder OnStart : "+i.mediaRecorder.state),i.callbackTable[2](i.callback,2,!0)},n.onerror=function(e){i.callbackTable[8](i.callback,DBG,"mediaRecorder OnError : "+e.error),i.stopRecorder()},n.onpause=function(e){i.callbackTable[8](i.callback,DBG,"---\x3e mediaRecorder onpause"),i.callbackTable[3](i.callback,1,!0),i.callbackTable[8](i.callback,DBG,"<--- mediaRecorder onpause")},n.onresume=function(e){i.callbackTable[8](i.callback,DBG,"---\x3e mediaRecorder onresume"),i.callbackTable[4](i.callback,2,!0),i.callbackTable[8](i.callback,DBG,"<--- mediaRecorder onresume")},n.onstop=function(a){i.callbackTable[8](i.callback,DBG,"---\x3e mediaRecorder onstop");var l=new Blob(b,{type:mime_types[t]}),c=URL.createObjectURL(l);i.callbackTable[8](i.callback,DBG,"Instance Number : "+i.instanceNo.toString()),i.setRecordURL(e,c);var r=i.localObjects.findIndex((a=>a==e));null!=r&&r>=0?(i.callbackTable[8](i.callback,DBG,"Found : "+r),i.localObjects[r]=e):(i.callbackTable[8](i.callback,DBG,"NOT FOUND! : "+e),i.localObjects.push(e)),b=null,i.callbackTable[8](i.callback,DBG,"recorder stopped"),i.mediaRecorder=null,i.callbackTable[5](i.callback,0,!0,i.getRecordURL(e)),i.callbackTable[8](i.callback,DBG,"<--- mediaRecorder onstop")}}stop(){this.callbackTable[8](this.callback,DBG,"JS:---\x3e stop()"),this.stopTimer(),null!=this.mediaRecorder&&(this.mediaRecorder.stop(),this.mediaRecorder=null),null!=this.mediaStream&&(this.mediaStream.getTracks().forEach((e=>e.stop())),this.mediaStream=null),this.callbackTable[8](this.callback,DBG,"JS:<--- stop()")}stopRecorder(){this.callbackTable[8](this.callback,DBG,"JS:---\x3e stopRecorder"),this.stopTimer(),null!=this.mediaRecorder?this.mediaRecorder.stop():this.callbackTable[5](this.callback,0,!0,this.getRecordURL(this.currentRecordPath)),this.mediaRecorder=null,null!=this.mediaStream&&(this.mediaStream.getTracks().forEach((e=>e.stop())),this.mediaStream=null),this.callbackTable[8](this.callback,DBG,"JS:<--- stopRecorder")}pauseRecorder(){this.callbackTable[8](this.callback,DBG,"pauseRecorder"),this.mediaRecorder.pause(),this.stopTimer(),this.callbackTable[8](this.callback,DBG,"recorder paused : "+this.mediaRecorder.state)}resumeRecorder(){this.callbackTable[8](this.callback,DBG,"resumeRecorder"),this.mediaRecorder.resume(),this.startTimer(),this.callbackTable[8](this.callback,DBG,"recorder resumed : "+this.mediaRecorder.state)}startTimer(){this.callbackTable[8](this.callback,DBG,"startTimer()"),this.stopTimer();var e=this;this.subscriptionDuration>0&&(this.countDownDate=(new Date).getTime(),this.timerId=setInterval((function(){var a=(new Date).getTime()-e.countDownDate;e.callbackTable[0](e.callback,e.deltaTime+a,0)}),this.subscriptionDuration))}stopTimer(){if(this.callbackTable[8](this.callback,DBG,"JS:---\x3e stopTimer()"),null!=this.timerId){clearInterval(this.timerId);var e=(new Date).getTime()-this.countDownDate;this.deltaTime+=e,this.timerId=null}this.callbackTable[8](this.callback,DBG,"JS:<--- stopTimer()")}}
//# sourceMappingURL=/sm/7e898b2bbbed4a319ecf2b385172883e30f763b0c01bcfc7a9131089b64088f8.map